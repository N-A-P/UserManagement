<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mockproject.du1.mapper.PagesMapper">
	<!--Get List All page Result Map -->
	<resultMap id="GetPagesResultMap"
		type="com.mockproject.du1.model.Pages">
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="name" jdbcType="VARCHAR" property="name" />
		<result column="code" jdbcType="VARCHAR" property="code" />
		<result column="url" jdbcType="VARCHAR" property="url" />
		<result column="updated_by" jdbcType="VARCHAR"
			property="updatedBy" />
		<result column="created_timestamp" jdbcType="TIMESTAMP"
			property="createdTimestamp" />
		<result column="updated_timestamp" jdbcType="TIMESTAMP"
			property="updatedTimestamp" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Nov 04 
			21:55:34 ICT 2019. -->
		id, name, code, url, updated_by, created_timestamp, updated_timestamp
	</sql>

	<!--Get List All Pages Query -->
	<select id="sqlGetAllPagesSelect" resultMap="GetPagesResultMap">
		SELECT 
		<include refid="Base_Column_List" />
		FROM public.pages

	</select>

	<!--Get Pages By Id Query -->
	<select id="sqlGetPagesByIdSelect" resultMap="GetPagesResultMap">
		SELECT 
		<include refid="Base_Column_List" />
		FROM public.pages WHERE page_id = #{pagesId}

	</select>

	<!--Get Pages By Name Or Code Query -->
	<select id="sqlGetPagesByNameOrCodeSelect"
		resultMap="GetPagesResultMap">
		<bind name="_pageCode" value="'%' + extractCondition + '%'" />
		<bind name="_pageName" value="'%' + extractCondition + '%'" />
		SELECT 
        <include refid="Base_Column_List" />
		FROM public.pages WHERE page_code
		ILIKE #{_pageCode} OR
		page_name ILIKE #{_pageName}

	</select>

	<!--Get Count page: Check duplicate page name -->
	<select id="sqlCountPagesByNameSelect" resultType="Long"
		parameterType="String">

		SELECT
		COUNT(*)
		FROM
		public.pages
		WHERE
		public.pages.page_name
		= #{pagesName}

	</select>

	<!--Get Count page: Check duplicate page code -->
	<select id="sqlCountPagesByCodeSelect" resultType="Long"
		parameterType="String">

		SELECT
		COUNT(*)
		FROM
		public.pages
		WHERE
		public.pages.page_code
		= #{pagesCode}

	</select>

	<update id="sqlEditPagesInfoUpdate"
		parameterType="com.mockproject.du1.model.Pages">

		UPDATE public.pages
		SET page_name =
		#{pagesName},
		page_code =
		#{pagesCode},
		url =
		#{pagesUrl},
		updated_by=#{updateBy},
		updated_timestamp
		=#{updateTimestamp}::timestamp without time zone
		WHERE
		page_id =
		#{pagesId}
	</update>

	<!--Insert Pages Information -->
	<insert id="sqlPagesInsert"
		parameterType="com.mockproject.du1.model.Pages">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 04 21:55:34 ICT 2019.
    -->
    insert into public.pages
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="code != null">
        code,
      </if>
      <if test="url != null">
        url,
      </if>
      <if test="updatedBy != null">
        updated_by,
      </if>
      <if test="createdTimestamp != null">
        created_timestamp,
      </if>
      <if test="updatedTimestamp != null">
        updated_timestamp,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="code != null">
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="url != null">
        #{url,jdbcType=VARCHAR},
      </if>
      <if test="updatedBy != null">
        #{updatedBy,jdbcType=VARCHAR},
      </if>
      <if test="createdTimestamp != null">
        #{createdTimestamp,jdbcType=TIMESTAMP},
      </if>
      <if test="updatedTimestamp != null">
        #{updatedTimestamp,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>



</mapper>